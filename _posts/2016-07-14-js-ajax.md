---
layout: post
title:  "Ajax"
categories: JavaScript
---

## 原生实现

```var xhr = new XMLHttpRequest();```

1. ```xhr.open(type, url, async)```启动一个请求
2. ```xhr.send(data)``` 在请求中填入数据，发送
3. 响应
 -  **同步响应**时：程序等待服务器响应，自动填充XHR对象的属性
  判断HTTP状态```xhr.status```为200-300 | 304，可以读取响应
  - **异步响应**时：
  readyState会不断发生变化，触发```xhr.onreadystatechange(...)```事件
  readyState等于4的时候，数据准备就绪，可以读取响应
 -  **响应内容**
  返回文本：```xhr.responseText```
  返回XML：```xhr.responseXML```
  statusText：```xhr.HTTP状态的说明```
4. ```xhr.abort()```； 取消异步Ajax请求

## Fetch

XHR在设计上不符合职责分离原则，将输入、输出和用事件来跟踪的状态混杂在一个对象里。

Fetch用来简洁捕捉从网络上检索一个资源的意图。

示例；

```javascript
fetch("https://api.github.com/users/octocat/gists").then(res =>{
  return res.json();
}).then(json => {
  console.log(json[0]);
})
```

